<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
   <!-- PARAMETER LIST
     name - mandatory
     label - optional
     required - optional
     maxlength - optional
     size - optional
     backingBean - mandatory
     accept - optional
     rendered - optional
   -->

   <ui:composition>
      <c:if test="${empty accept}">
         <c:set var="accept" value="*"/>
      </c:if>

      <c:if test="${empty label}">
         <c:set var="label" value="${name}"/>
      </c:if>

      <c:if test="${empty required}">
         <c:set var="required" value="true"/>
      </c:if>

      <c:if test="${empty size}">
         <c:set var="size" value="30"/>
      </c:if>

      <c:if test="${empty rendered}">
         <c:set var="rendered" value="true"/>
      </c:if>

      <h:column rendered="${rendered}">
         <p:outputLabel  id="labelFile${name}"
                         for="inputFile${name}"
                         value="${label}"/>
      </h:column>

      <h:column rendered="${rendered}">
         <p:fileUpload id="inputFile${name}"
                            value="${backingBean[name]}"
                            required="${required}"
                            accept="${accept}"
                           process="@this"

                              mode="simple"
                            skinSimple="true"/>
         <p:message for="inputFile${name}">
            <f:facet name="errorMarker">
               <h:graphicImage  value="/img/error.gif" />
            </f:facet>
         </p:message>
      </h:column>
   </ui:composition>
</html>